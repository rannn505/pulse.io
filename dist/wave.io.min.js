!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.http=e()}}(function(){var e;return function n(e,t,o){function c(i,u){if(!t[i]){if(!e[i]){var s="function"==typeof require&&require;if(!u&&s)return s(i,!0);if(r)return r(i,!0);var d=new Error("Cannot find module '"+i+"'");throw d.code="MODULE_NOT_FOUND",d}var a=t[i]={exports:{}};e[i][0].call(a.exports,function(n){var t=e[i][1][n];return c(t?t:n)},a,a.exports,n,e,t,o)}return t[i].exports}for(var r="function"==typeof require&&require,i=0;i<o.length;i++)c(o[i]);return c}({1:[function(e,n,t){function o(e){if(!1 in window)throw d+"::WebSocket NOT supported by your Browser!";l=new f(e),l.onmessage(function(e){p.forEach(function(n,t){n.uri==e.uri&&n.method==e.method&&(n.cb(e.data),delete p[t])})})}function c(e,n){s(new a("GET",e,"","undefined"!=typeof n,n||function(){}))}function r(e,n,t){s(new a("POST",e,n,"undefined"!=typeof t,t||function(){}))}function i(e,n,t){s(new a("PUT",e,n,"undefined"!=typeof t,t||function(){}))}function u(e,n,t){s(new a("DELETE",e,n,"undefined"!=typeof t,t||function(){}))}function s(e){l&&(l.send(e),e.reswaiter&&p.push(e))}var d="wave.io",a=e("./requestmethod"),f=e("./ws3");n.exports={seturl:o,get:c,post:r,put:i,"delete":u};var l=null,p=[]},{"./requestmethod":5,"./ws3":6}],2:[function(e,n,t){n.exports=e("./http3")},{"./http3":1}],3:[function(e,n,t){function o(e){return JSON.parse(e)}function c(e){return JSON.stringify(e)}n.exports={toJSON:o,toSTR:c}},{}],4:[function(n,t,o){!function(n,o){"function"==typeof e&&e.amd?e([],o):"undefined"!=typeof t&&t.exports?t.exports=o():n.ReconnectingWebSocket=o()}(this,function(){function e(n,t,o){function c(e,n){var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,!1,!1,n),t}var r={debug:!1,automaticOpen:!0,reconnectInterval:1e3,maxReconnectInterval:3e4,reconnectDecay:1.5,timeoutInterval:2e3};o||(o={});for(var i in r)this[i]="undefined"!=typeof o[i]?o[i]:r[i];this.url=n,this.reconnectAttempts=0,this.readyState=WebSocket.CONNECTING,this.protocol=null;var u,s=this,d=!1,a=!1,f=document.createElement("div");f.addEventListener("open",function(e){s.onopen(e)}),f.addEventListener("close",function(e){s.onclose(e)}),f.addEventListener("connecting",function(e){s.onconnecting(e)}),f.addEventListener("message",function(e){s.onmessage(e)}),f.addEventListener("error",function(e){s.onerror(e)}),this.addEventListener=f.addEventListener.bind(f),this.removeEventListener=f.removeEventListener.bind(f),this.dispatchEvent=f.dispatchEvent.bind(f),this.open=function(n){u=new WebSocket(s.url,t||[]),n||f.dispatchEvent(c("connecting")),(s.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","attempt-connect",s.url);var o=u,r=setTimeout(function(){(s.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","connection-timeout",s.url),a=!0,o.close(),a=!1},s.timeoutInterval);u.onopen=function(){clearTimeout(r),(s.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","onopen",s.url),s.protocol=u.protocol,s.readyState=WebSocket.OPEN,s.reconnectAttempts=0;var t=c("open");t.isReconnect=n,n=!1,f.dispatchEvent(t)},u.onclose=function(t){if(clearTimeout(r),u=null,d)s.readyState=WebSocket.CLOSED,f.dispatchEvent(c("close"));else{s.readyState=WebSocket.CONNECTING;var o=c("connecting");o.code=t.code,o.reason=t.reason,o.wasClean=t.wasClean,f.dispatchEvent(o),n||a||((s.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","onclose",s.url),f.dispatchEvent(c("close")));var r=s.reconnectInterval*Math.pow(s.reconnectDecay,s.reconnectAttempts);setTimeout(function(){s.reconnectAttempts++,s.open(!0)},r>s.maxReconnectInterval?s.maxReconnectInterval:r)}},u.onmessage=function(n){(s.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","onmessage",s.url,n.data);var t=c("message");t.data=n.data,f.dispatchEvent(t)},u.onerror=function(n){(s.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","onerror",s.url,n),f.dispatchEvent(c("error"))}},1==this.automaticOpen&&this.open(!1),this.send=function(n){if(u)return(s.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","send",s.url,n),u.send(n);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"},this.close=function(e,n){"undefined"==typeof e&&(e=1e3),d=!0,u&&u.close(e,n)},this.refresh=function(){u&&u.close()}}return e.prototype.onopen=function(){},e.prototype.onclose=function(){},e.prototype.onconnecting=function(){},e.prototype.onmessage=function(){},e.prototype.onerror=function(){},e.debugAll=!1,e.CONNECTING=WebSocket.CONNECTING,e.OPEN=WebSocket.OPEN,e.CLOSING=WebSocket.CLOSING,e.CLOSED=WebSocket.CLOSED,e})},{}],5:[function(e,n,t){function o(e,n,t,o,c){return{method:e,uri:n,data:t,reswaiter:o,cb:c}}n.exports=o},{}],6:[function(e,n,t){function o(e){function n(e){i.readyState==WebSocket.OPEN?i.send(c.toSTR(e)):o.push(e)}function t(e){i.addEventListener("message",function(n){e(c.toJSON(n.data))})}var o=[],i=new r("ws://"+e,null,{reconnectInterval:2e3,maxReconnectInterval:4e3});return i.addEventListener("open",function(){o.forEach(function(e,n){i.send(c.toSTR(e))}),window.addEventListener("unload",function(){i.close()})},!1),i.addEventListener("close",function(e){o=[]},!1),{onmessage:t,send:n}}n.exports=o;var c=e("./parser"),r=e("./reconnecting-websocket.min")},{"./parser":3,"./reconnecting-websocket.min":4}]},{},[2])(2)});
/*! wave.io (c)2016 Ran Cohen @license MIT @link https://github.com/rannn505/wave.io */